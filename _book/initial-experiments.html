<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Section 6 Initial Experiments | e.GO Digital Hackathon</title>
  <meta name="description" content="This is a website demo for hachathon The output format for this example is bookdown::gitbook." />
  <meta name="generator" content="bookdown 0.10 and GitBook 2.6.7" />

  <meta property="og:title" content="Section 6 Initial Experiments | e.GO Digital Hackathon" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="This is a website demo for hachathon The output format for this example is bookdown::gitbook." />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Section 6 Initial Experiments | e.GO Digital Hackathon" />
  
  <meta name="twitter:description" content="This is a website demo for hachathon The output format for this example is bookdown::gitbook." />
  

<meta name="author" content="Team: Hugs for bugs" />


<meta name="date" content="2019-05-24" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="google-map-visulization.html">
<link rel="next" href="possible-obstacles.html">
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />









<style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; left: -4em; }
pre.numberSource a.sourceLine::before
  { content: attr(data-line-number);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">e.GO Digital Hackathon</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Task</a></li>
<li class="chapter" data-level="2" data-path="value-adding-services.html"><a href="value-adding-services.html"><i class="fa fa-check"></i><b>2</b> Value-adding services</a></li>
<li class="chapter" data-level="3" data-path="dataset-overview.html"><a href="dataset-overview.html"><i class="fa fa-check"></i><b>3</b> Dataset Overview</a><ul>
<li class="chapter" data-level="3.1" data-path="dataset-overview.html"><a href="dataset-overview.html#we-prepare-a-dataset-as-shown-below"><i class="fa fa-check"></i><b>3.1</b> We prepare a dataset, as shown below</a></li>
<li class="chapter" data-level="3.2" data-path="dataset-overview.html"><a href="dataset-overview.html#get-current-location-update-location"><i class="fa fa-check"></i><b>3.2</b> Get current location, update location</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="intelligent-choose-parking-lot.html"><a href="intelligent-choose-parking-lot.html"><i class="fa fa-check"></i><b>4</b> Intelligent choose parking lot</a></li>
<li class="chapter" data-level="5" data-path="google-map-visulization.html"><a href="google-map-visulization.html"><i class="fa fa-check"></i><b>5</b> Google Map Visulization</a></li>
<li class="chapter" data-level="6" data-path="initial-experiments.html"><a href="initial-experiments.html"><i class="fa fa-check"></i><b>6</b> Initial Experiments</a></li>
<li class="chapter" data-level="7" data-path="possible-obstacles.html"><a href="possible-obstacles.html"><i class="fa fa-check"></i><b>7</b> Possible obstacles</a></li>
<li class="chapter" data-level="8" data-path="potential-achievement.html"><a href="potential-achievement.html"><i class="fa fa-check"></i><b>8</b> Potential achievement</a></li>
<li class="chapter" data-level="9" data-path="time-schedule-for-masters-thesis.html"><a href="time-schedule-for-masters-thesis.html"><i class="fa fa-check"></i><b>9</b> Time Schedule for Master’s Thesis</a></li>
<li class="chapter" data-level="10" data-path="reference.html"><a href="reference.html"><i class="fa fa-check"></i><b>10</b> Reference</a></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">e.GO Digital Hackathon</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="initial-experiments" class="section level1">
<h1><span class="header-section-number">Section 6</span> Initial Experiments</h1>
<p>We will work on a real-world dataset about Census income, also known as the Adult dataset available in the UCI ML Repository, where we will predict if the potential income of people is more than $50K/year or not.</p>
<p>As declared before, one way to explain model predictions is to examine the permutation importance of the features. Typically, ELI5 <span class="citation">[@eli5]</span> provides weights along with bias for each feature demonstrating how influential it might have been in contributing to the final predictions across the entire dataset. As presented in Figure <a href="initial-experiments.html#fig:feature-weights">6.1</a>, the first column means feature weights and bias, and the second column shows the feature name. It is evident those top ranking features are of crucial effect in this dataset, such as capital gain, education-num and age. Then, we might want to investigate feature importance for individual instance, which is fortunately also supported by the library. As shown in Figure <a href="initial-experiments.html#fig:individual-importance">6.2</a>, the first column shows the contribution weights each feature has, and the next two columns represent feature names and corresponding feature values. As seen from the label, this person earns more than $50K/year, which is highly credited with his high education level and stable relationship.</p>
<pre class="sourceCode r"><code class="sourceCode r">knitr<span class="op">::</span><span class="kw">include_graphics</span>(<span class="st">&quot;img/feature_weights.png&quot;</span>)</code></pre>
<div class="figure" style="text-align: center"><span id="fig:feature-weights"></span>
<img src="img/feature_weights.png" alt="Feature importance weights for entire dataset"  />
<p class="caption">
Figure 6.1: Feature importance weights for entire dataset
</p>
</div>
<pre class="sourceCode r"><code class="sourceCode r">knitr<span class="op">::</span><span class="kw">include_graphics</span>(<span class="st">&quot;img/individual_importance.png&quot;</span>)</code></pre>
<div class="figure" style="text-align: center"><span id="fig:individual-importance"></span>
<img src="img/individual_importance.png" alt="Feature importance weights for a single instance"  />
<p class="caption">
Figure 6.2: Feature importance weights for a single instance
</p>
</div>
<p>Another interesting experiment was done through SHAP library <span class="citation">[@lundberg2017unified]</span>, offering a unified approach to explain the output of any machine learning model. SHAP is typically used to explain decisions for an individual instance, by assigning each feature an importance value for a particular prediction. As depicted in Figure <a href="initial-experiments.html#fig:shap">6.3</a>, SHAP gives nice reasoning below showing which features are the most influential in the model taking the correct decision of predicting the person’s income. The below explanation shows features each contributing to push the model output from the base value (the average model output over the training dataset we passed) to the actual model output. Features pushing the prediction higher are shown in red, those pushing the prediction lower are in blue. It is obvious to notice that education-num, relationship and occupation dominate the prediction to some degree.</p>
<pre class="sourceCode r"><code class="sourceCode r">knitr<span class="op">::</span><span class="kw">include_graphics</span>(<span class="st">&quot;img/shap.png&quot;</span>)</code></pre>
<div class="figure" style="text-align: center"><span id="fig:shap"></span>
<img src="img/shap.png" alt="SHAP value for each feature of a single instance"  />
<p class="caption">
Figure 6.3: SHAP value for each feature of a single instance
</p>
</div>
<p>Additionally, we could use the dependence plot to show the effect of a single feature across the whole dataset. They plot feature’s values vs. the SHAP value of that feature across instances. As plotted in Figure <a href="initial-experiments.html#fig:edu-dependence">6.4</a>, the vertical axis represents SHAP value for education-num, and the horizontal axis indicates the feature values of education-num. Actually, another feature could be chosen for coloring dots to show feature interactions, however, for simplicity, the dependent feature is set as education-num as well. From the plot, it is noticed that the SHAP value climbs with the increment of education-num, which means higher education level generally contributes more for the prediction.</p>
<pre class="sourceCode r"><code class="sourceCode r">knitr<span class="op">::</span><span class="kw">include_graphics</span>(<span class="st">&quot;img/education_dependence_plot.png&quot;</span>)</code></pre>
<div class="figure" style="text-align: center"><span id="fig:edu-dependence"></span>
<img src="img/education_dependence_plot.png" alt="SHAP dependence plot for education-num"  />
<p class="caption">
Figure 6.4: SHAP dependence plot for education-num
</p>
</div>
<p>Furthermore, treating the SHAP value of education-num as numeric target concept, subgroups could be discovered by the pysubgroup library <span class="citation">[@lemmerich2018pysubgroup]</span>. As seen from Figure <a href="initial-experiments.html#fig:edu-sg-discovery">6.5</a>, we could conclude that people work as Prof-specialty have a stronger tendency to earn more than 50K$/year. Nevertheless, those subgroup descriptions are pretty similar, which requires further methods to reduce redundancy. In addition, optimized quality measurement shall be developed for the next step.</p>
<pre class="sourceCode r"><code class="sourceCode r">knitr<span class="op">::</span><span class="kw">include_graphics</span>(<span class="st">&quot;img/edu_sg_discovery.png&quot;</span>)</code></pre>
<div class="figure" style="text-align: center"><span id="fig:edu-sg-discovery"></span>
<img src="img/edu_sg_discovery.png" alt="Subgroup discovery result with SHAP value of education-num as target"  />
<p class="caption">
Figure 6.5: Subgroup discovery result with SHAP value of education-num as target
</p>
</div>

</div>
            </section>

          </div>
        </div>
      </div>
<a href="google-map-visulization.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="possible-obstacles.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"google": false,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "google", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"download": ["_main.pdf", "_main.epub"],
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>
